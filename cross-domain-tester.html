<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>POST è·¨åŸŸè¯·æ±‚æµ‹è¯•ï¼ˆç»“æœè¾“å‡ºåˆ°é¡µé¢ï¼‰</title>
    <style>
        /* ç®€å•æ ·å¼ä¼˜åŒ–ï¼Œè®©ç»“æœæ˜¾ç¤ºæ›´æ¸…æ™° */
        .result {
            margin: 20px;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap; /* ä¿ç•™æ¢è¡Œå’Œç©ºæ ¼ */
        }
        .success {
            border-color: #4CAF50;
            background-color: #f9fff9;
        }
        .error {
            border-color: #f44336;
            background-color: #fff9f9;
        }
        .ua-info {
            margin: 20px;
            padding: 10px;
            border: 1px solid #2196F3;
            border-radius: 8px;
            background-color: #f0f8ff;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h2>POST è·¨åŸŸè¯·æ±‚ç»“æœ</h2>
    <!-- æ˜¾ç¤ºå½“å‰æµè§ˆå™¨UAçš„å®¹å™¨ -->
    <div class="ua-info">
        <span id="uaText"></span>
    </div>
    <!-- ç”¨äºæ˜¾ç¤ºè¯·æ±‚ç»“æœçš„å®¹å™¨ -->
    <div id="resultContainer" class="result"></div>

    <script>
        // ç›®æ ‡æ¥å£åœ°å€ï¼ˆBç«™çš„ fees/pc æ¥å£ï¼‰
        const targetUrl = 'https://cm.bilibili.com/cm/api/fees/pc';
        // ç»“æœæ˜¾ç¤ºå®¹å™¨
        const resultContainer = document.getElementById('resultContainer');
        // UAæ˜¾ç¤ºå®¹å™¨
        const uaText = document.getElementById('uaText');

        // 1. è¾“å‡ºå½“å‰æµè§ˆå™¨å®Œæ•´UA
        const currentUA = navigator.userAgent;
        uaText.textContent = currentUA;

        // 2. å‘èµ· POST è·¨åŸŸè¯·æ±‚
        fetch(targetUrl, {
            method: 'POST', // æ”¹ä¸º POST æ–¹æ³•
            mode: 'cors', // è·¨åŸŸæ¨¡å¼ï¼ˆæµè§ˆå™¨é»˜è®¤ï¼Œæ˜¾å¼æŒ‡å®šæ›´æ¸…æ™°ï¼‰
            headers: {
                'Content-Type': 'application/json', // å¤šæ•° POST æ¥å£è¦æ±‚çš„æ ¼å¼
                'Referer': 'https://www.bilibili.com/', // Bç«™æ¥å£å¯èƒ½éœ€è¦ Referer éªŒè¯ï¼ˆæ¨¡æ‹Ÿæ­£å¸¸è®¿é—®ï¼‰
                'User-Agent': currentUA // ä½¿ç”¨å½“å‰æµè§ˆå™¨çš„çœŸå®UA
            },
            body: JSON.stringify({}) // POST è¯·æ±‚ä½“ï¼ˆè¯¥æ¥å£å¯èƒ½ä¸éœ€è¦å‚æ•°ï¼Œä¼ ç©ºå¯¹è±¡å³å¯ï¼‰
        })
        .then(response => {
            // å…ˆåˆ¤æ–­å“åº”çŠ¶æ€æ˜¯å¦æˆåŠŸï¼ˆ200-299ï¼‰
            if (!response.ok) {
                throw new Error(`è¯·æ±‚å¤±è´¥ï¼šçŠ¶æ€ç  ${response.status}ï¼ˆ${response.statusText}ï¼‰`);
            }
            return response.text(); // æŒ‰åŸéœ€æ±‚è§£æä¸ºæ–‡æœ¬æ ¼å¼
        })
        .then(data => {
            // æˆåŠŸï¼šè¾“å‡ºåˆ°é¡µé¢ï¼Œæ·»åŠ æˆåŠŸæ ·å¼
            resultContainer.className = 'result success';
            resultContainer.innerHTML = `âœ… è¯·æ±‚æˆåŠŸï¼å“åº”ç»“æœï¼š\n\n${data}`;
        })
        .catch(error => {
            // å¤±è´¥ï¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯ + è·¨åŸŸè§£å†³æ–¹æ¡ˆæç¤º
            resultContainer.className = 'result error';
            // æ‹¼æ¥é”™è¯¯ä¿¡æ¯å’Œ --disable-web-security æç¤º
            const errorMsg = `âŒ è¯·æ±‚å¤±è´¥ï¼é”™è¯¯ä¿¡æ¯ï¼š\n\n${error.message}\n\n` +
                `ğŸ’¡ è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼š\n` +
                `Chromium å¼€å‘ç‰ˆæµè§ˆå™¨è¯·å°è¯•ä½¿ç”¨ --disable-web-security å‚æ•°å¯åŠ¨ï¼Œç¦ç”¨åŒæºç­–ç•¥è¿›è¡Œæµ‹è¯•ã€‚`;
            resultContainer.innerHTML = errorMsg;
            // æ§åˆ¶å°æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ï¼ˆä¾¿äºè°ƒè¯•ï¼‰
            console.error('è¯¦ç»†é”™è¯¯ï¼š', error);
        });
    </script>
</body>
</html>
